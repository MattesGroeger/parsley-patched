<mx:Panel 
	xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:parsley="org.spicefactory.parsley.flex.tag.view.*"
	width="100%"
	height="100%"
	title="Panel2"
	addedToStage="trace('ADD 2');"
	>
	
	<mx:Script>
		<![CDATA[
			 import flash.events.Event;
			 import org.spicefactory.parsley.flex.mxmlconfig.core.CoreModel;
	         import org.spicefactory.parsley.flex.FlexContextBuilder;
	         import org.spicefactory.parsley.core.context.Context;
	         import mx.containers.Panel;
	         import mx.managers.PopUpManager;
	         import mx.containers.TitleWindow;
			
			 [Inject]
			 [Bindable]
			 public var model:CoreModel;	
         
         	 [Inject]
         	 public var context:Context;
         	
         	 private var window:TitleWindow;
         
         
	         private function showPopup () : void {
	         	if (window == null) window = new SomeWindow();
	         	context.viewManager.addViewRoot(window);
	         	PopUpManager.addPopUp(window, this);
	         }
	         
	         private function hidePopup () : void {
	         	PopUpManager.removePopUp(window);
	         }
      ]]>
   </mx:Script>
   
	
	<parsley:Configure/>
	
	<mx:Text text="AA2"/>
	<mx:Text text="Bound value: |{model.stringProp}|"/>
	<mx:Text text="BB2"/>
	

	<mx:Button label="Show Popup" click="showPopup();"/>

	<mx:Button label="Hide Popup" click="hidePopup();"/>

	
</mx:Panel> 