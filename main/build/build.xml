<project name="Parsley Build"> 

	
	<property file="build.properties" />
	
	<property name="version" value="1.0.2-SNAPSHOT"/>
	<property name="spicelib.version" value="1.1.0-SNAPSHOT"/>
	<property name="cinnamon.version" value="0.2.1"/>
	<property name="project.dir" value="${basedir}/.."/>
	<property name="lib.dir" value="${project.dir}/lib"/>


	<target name="compile">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${project.dir}/release/parsley-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/playerglobal.swc" />
			<arg line="-el ${lib.dir}/spicelib-${spicelib.version}.swc" />
			<arg line="-el ${lib.dir}/cinnamon-${cinnamon.version}.swc" />
			<arg line="-sp ${project.dir}/src" />
			<arg line="-is ${project.dir}/src" />
			<arg line="-debug=true"/>
			<arg line="-verbose-stacktraces"/>
		</exec>
	</target>
	
	<target name="generate_full_api">
		<delete includeemptydirs="true">
			<fileset dir="${project.dir}/docs" includes="**/*" />
		</delete>
		<exec executable="${flex.sdk}/bin/asdoc.exe" dir="${project.dir}/src" spawn="no">
			<arg line="-source-path ."/>
			<arg line="-doc-sources ."/>
			<arg line="-library-path ${basedir}/cinnamon-${cinnamon.version}.swc"/>
			<arg line="-library-path ${basedir}/spicelib-${spicelib.version}.swc"/>
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Parsley Full API"/>
			<arg line="-window-title"/>
			<arg value="Parsley Full API"/>
			<arg line="-package org.spicefactory.parsley.context"/>
			<arg value="Public API of the IOC Container"/>
			<arg line="-package org.spicefactory.parsley.context.factory"/>
			<arg value="Public API for Custom Configuration Namespaces"/>
			<arg line="-package org.spicefactory.parsley.context.binding"/>
			<arg value="Classes for binding to property values"/>
			<arg line="-package org.spicefactory.parsley.context.converter"/>
			<arg value="Internal Converter implementations"/>
			<arg line="-package org.spicefactory.parsley.context.expr"/>
			<arg value="Internal extensions to the Spicelib Expression Framework"/>
			<arg line="-package org.spicefactory.parsley.context.util"/>
			<arg value="Internal Utility Classes"/>
			<arg line="-package org.spicefactory.parsley.context.xml"/>
			<arg value="XML configuration file parser"/>
			<arg line="-package org.spicefactory.parsley.context.tree"/>
			<arg value="Base Classes for the internal representation of XML configuration files"/>
			<arg line="-package org.spicefactory.parsley.context.tree.core"/>
			<arg value="Classes representing the core XML tags"/>
			<arg line="-package org.spicefactory.parsley.context.tree.core.enum"/>
			<arg value="Enumerations for the core XML tags"/>
			<arg line="-package org.spicefactory.parsley.context.tree.localization"/>
			<arg value="Classes representing the XML tags for localization"/>
			<arg line="-package org.spicefactory.parsley.context.tree.setup"/>
			<arg value="Classes representing the XML tags of the setup section"/>
			<arg line="-package org.spicefactory.parsley.context.tree.values"/>
			<arg value="Classes representing the XML tags for values"/>
			<arg line="-package org.spicefactory.parsley.context.tree.namespaces"/>
			<arg value="Classes representing the core XML tags for custom namespaces"/>
			<arg line="-package org.spicefactory.parsley.context.tree.namespaces.template"/>
			<arg value="Classes representing the core XML tags for templates of custom namespaces"/>
			<arg line="-package org.spicefactory.parsley.context.tree.namespaces.template.client"/>
			<arg value="Classes representing the template client XML tags"/>
			<arg line="-package org.spicefactory.parsley.context.tree.namespaces.template.nested"/>
			<arg value="Classes representing the nested tags in templates"/>
			<arg line="-package org.spicefactory.parsley.context.tree.namespaces.template.context"/>
			<arg value="Context classes for parsing and processing templates"/>
			<arg line="-package org.spicefactory.parsley.localization"/>
			<arg value="Public API of the Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.localization.events"/>
			<arg value="Localization Events"/>
			<arg line="-package org.spicefactory.parsley.localization.spi"/>
			<arg value="Service Provider Interfaces of the Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.localization.impl"/>
			<arg value="Default Implementation of the Localization API"/>
			<arg line="-package org.spicefactory.parsley.mvc"/>
			<arg value="Public API of the MVC Framework"/>
			<arg line="-package org.spicefactory.parsley.mvc.impl"/>
			<arg value="Internal classes of the MVC Framework"/>
			<arg line="-package org.spicefactory.parsley.namespaces.cinnamon"/>
			<arg value="Custom Configuration Namespace for Cinnamon Remoting"/>
			<arg line="-package org.spicefactory.parsley.namespaces.logging"/>
			<arg value="Custom Configuration Namespace for Spicelib Logging"/>
			<arg line="-package org.spicefactory.parsley.namespaces.mvc"/>
			<arg value="Custom Configuration Namespace for the MVC Framework"/>
			<arg line="-package org.spicefactory.parsley.util"/>
			<arg value="Internal Utility Classes"/>
			<arg line="-output ../docs"/>
		</exec>
		
	</target>
	
	<target name="generate_public_api">
		<delete includeemptydirs="true">
			<fileset dir="${project.dir}/docs" includes="**/*" />
		</delete>
		<exec executable="${flex.sdk}/bin/asdoc.exe" dir="${project.dir}/src" spawn="no">
			<arg line="-source-path ."/>
			<arg line="-doc-classes org.spicefactory.parsley.context.ApplicationContext"/>
			<arg line="org.spicefactory.parsley.context.ApplicationContextParser"/> 
			<arg line="org.spicefactory.parsley.context.ConfigurationError"/> 
			<arg line="org.spicefactory.parsley.context.factory.ElementConfig"/> 
			<arg line="org.spicefactory.parsley.context.factory.FactoryMetadata"/> 
			<arg line="org.spicefactory.parsley.context.factory.ObjectFactoryConfig"/> 
			<arg line="org.spicefactory.parsley.context.factory.ObjectProcessorConfig"/> 
			<arg line="org.spicefactory.parsley.context.factory.ParserContext"/> 
			<arg line="org.spicefactory.parsley.localization.Locale"/>
			<arg line="org.spicefactory.parsley.localization.LocaleManager"/>
			<arg line="org.spicefactory.parsley.localization.MessageBundle"/>
			<arg line="org.spicefactory.parsley.localization.MessageSource"/>
			<arg line="org.spicefactory.parsley.localization.events.LocaleSwitchEvent"/>
			<arg line="org.spicefactory.parsley.mvc.Action"/>
			<arg line="org.spicefactory.parsley.mvc.ActionInterceptor"/>
			<arg line="org.spicefactory.parsley.mvc.ActionProcessor"/>
			<arg line="org.spicefactory.parsley.mvc.ApplicationEvent"/>
			<arg line="org.spicefactory.parsley.mvc.EventSource"/>
			<arg line="org.spicefactory.parsley.mvc.FrontController"/>
			<arg line="-library-path ${basedir}/cinnamon-${cinnamon.version}.swc"/>
			<arg line="-library-path ${basedir}/spicelib-${spicelib.version}.swc"/>
			<arg line="-exclude-dependencies=true"/>
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Parsley Public API"/>
			<arg line="-window-title"/>
			<arg value="Parsley Public API"/>
			<arg line="-package org.spicefactory.parsley.context"/>
			<arg value="Public API of the IOC Container"/>
			<arg line="-package org.spicefactory.parsley.context.factory"/>
			<arg value="Public API for Custom Configuration Namespaces"/>
			<arg line="-package org.spicefactory.parsley.localization"/>
			<arg value="Public API of the Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.localization.events"/>
			<arg value="Localization Events"/>
			<arg line="-package org.spicefactory.parsley.mvc"/>
			<arg value="Public API of the MVC Framework"/>
			<arg line="-output ../docs"/>
		</exec>
		
	</target>
	
</project>
