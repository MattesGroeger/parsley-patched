<project name="Parsley Build"> 

	
	<property file="build.properties" />
	
	<property name="version" value="2.3.M3-SNAPSHOT"/>
	<property name="pimento.version" value="1.1.0"/>
	<property name="project.dir" value="${basedir}/.."/>
	<property name="lib.dir" value="${project.dir}/lib"/>
	
	<property name="release.target.dir" value="${project.dir}/release/parsley-${version}"/>

	
	<!-- compile -->
	
	<target name="clear">
		<delete dir="${release.target.dir}"/>
		<mkdir dir="${release.target.dir}"/>
	</target>
	
	<target name="compile_parsley_flash">
		<replace file="${project.dir}/parsley-config/org/spicefactory/parsley/dsl/context/ContextBuilder.as" 
					token="FlexSupport.initialize();" value="//***FlexSupport.initialize();"/>
		<replace file="${project.dir}/parsley-config/org/spicefactory/parsley/dsl/context/ContextBuilder.as" 
					token="import org.spicefactory.parsley.flex.FlexSupport;" value="//***import org.spicefactory.parsley.flex.FlexSupport;"/>
		
		<replace file="${project.dir}/parsley-core/org/spicefactory/parsley/core/builder/impl/DefaultCompositeContextBuilder.as" 
					token="BindingSupport" value="FlashBindingSupport"/>
		<replace file="${project.dir}/parsley-core/org/spicefactory/parsley/core/builder/impl/DefaultCompositeContextBuilder.as" 
					token="parsley.binding" value="parsley.flash.binding"/>
		<replace file="${project.dir}/parsley-xml/org/spicefactory/parsley/xml/mapper/XmlObjectDefinitionMapperFactory.as" 
					token="PublishDecorator" value="FlashPublishDecorator"/>
		<replace file="${project.dir}/parsley-xml/org/spicefactory/parsley/xml/mapper/XmlObjectDefinitionMapperFactory.as" 
					token="PublishSubscribeDecorator" value="FlashPublishSubscribeDecorator"/>
		<replace file="${project.dir}/parsley-xml/org/spicefactory/parsley/xml/mapper/XmlObjectDefinitionMapperFactory.as" 
					token="binding.decorator.Flash" value="flash.binding.Flash"/>
		
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=Inject,InjectConstructor,Factory,PostConstruct,PreDestroy,Init,Destroy,Observe,AsyncInit,ManagedEvents,MessageDispatcher,MessageHandler,MessageBinding,MessageError,MessageInterceptor,Command,CommandResult,CommandError,CommandStatus,Publish,Subscribe,PublishSubscribe,ResourceBinding,RemovedEvent,Selector,Target,Internal,ObjectDefinition,DynamicObject" />
			<arg line="-o ${release.target.dir}/release/parsley-flash-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${release.target.dir}/release/spicelib-flash-${version}.swc" />
			<arg line="-el ${project.dir}/lib/cinnamon-${pimento.version}.swc" />
			<arg line="-el ${project.dir}/lib/pimento-${pimento.version}.swc" />
			<arg line="-sp ${project.dir}/parsley-core ${project.dir}/parsley-config ${project.dir}/parsley-flash ${project.dir}/parsley-flex ${project.dir}/parsley-extensions ${project.dir}/parsley-integration ${project.dir}/parsley-xml"/>
			<arg line="-is ${project.dir}/parsley-core" />
			<arg line="-is ${project.dir}/parsley-config" />
			<arg line="-is ${project.dir}/parsley-flash" />
			<arg line="-is ${project.dir}/parsley-xml" />
			<arg line="-is ${project.dir}/parsley-integration" />
			<arg line="-debug=true"/>
			<arg line="-verbose-stacktraces"/>
		</exec>
		<replace file="${project.dir}/parsley-config/org/spicefactory/parsley/dsl/context/ContextBuilder.as" 
					token="//***" value=""/>
		
		<replace file="${project.dir}/parsley-core/org/spicefactory/parsley/core/builder/impl/DefaultCompositeContextBuilder.as" 
					token="FlashBindingSupport" value="BindingSupport"/>
		<replace file="${project.dir}/parsley-core/org/spicefactory/parsley/core/builder/impl/DefaultCompositeContextBuilder.as" 
					token="parsley.flash.binding" value="parsley.binding"/>
		<replace file="${project.dir}/parsley-xml/org/spicefactory/parsley/xml/mapper/XmlObjectDefinitionMapperFactory.as" 
					token="FlashPublishDecorator" value="PublishDecorator"/>
		<replace file="${project.dir}/parsley-xml/org/spicefactory/parsley/xml/mapper/XmlObjectDefinitionMapperFactory.as" 
					token="FlashPublishSubscribeDecorator" value="PublishSubscribeDecorator"/>
		<replace file="${project.dir}/parsley-xml/org/spicefactory/parsley/xml/mapper/XmlObjectDefinitionMapperFactory.as" 
					token="flash.binding" value="binding.decorator"/>
	</target>
	
	<target name="compile_parsley_flex3">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=Inject,InjectConstructor,Factory,PostConstruct,PreDestroy,Init,Destroy,Observe,AsyncInit,ManagedEvents,MessageDispatcher,MessageHandler,MessageBinding,MessageError,MessageInterceptor,Command,CommandResult,CommandError,CommandStatus,Publish,Subscribe,PublishSubscribe,ResourceBinding,RemovedEvent,Selector,Target,Internal,ObjectDefinition,DynamicObject" />
			<arg line="-o ${release.target.dir}/release/parsley-flex3-${version}.swc" />
			<arg line="-namespace http://www.spicefactory.org/parsley ${project.dir}/manifest/parsley-core-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/flex ${project.dir}/manifest/parsley-flex-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/pimento ${project.dir}/manifest/parsley-pimento-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/cinnamon ${project.dir}/manifest/parsley-cinnamon-manifest.xml" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${release.target.dir}/release/spicelib-flex-${version}.swc" />
			<arg line="-el ${project.dir}/lib/cinnamon-${pimento.version}.swc" />
			<arg line="-el ${project.dir}/lib/pimento-${pimento.version}.swc" />
			<arg line="-sp ${project.dir}/parsley-core ${project.dir}/parsley-config ${project.dir}/parsley-flex ${project.dir}/parsley-extensions ${project.dir}/parsley-integration ${project.dir}/parsley-xml"/>
			<arg line="-include-namespaces=http://www.spicefactory.org/parsley,http://www.spicefactory.org/parsley/flex,http://www.spicefactory.org/parsley/pimento,http://www.spicefactory.org/parsley/cinnamon" />
			<arg line="-is ${project.dir}/parsley-core" />
			<arg line="-is ${project.dir}/parsley-xml" />
			<arg line="-include-classes ConfigurationClasses FlexSupportClasses IntegrationClasses" />
			<arg line="-debug=true"/>
			<arg line="-verbose-stacktraces"/>
		</exec>
	</target>
	
	<target name="compile_parsley_flex4">
		<replace file="${project.dir}/parsley-flex/org/spicefactory/parsley/flex/modules/FlexModuleSupport.as" 
					token="extends Flex3ModuleInfoBase" value="extends Flex4ModuleInfoBase"/>
		<exec executable="${flex4.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=Inject,InjectConstructor,Factory,PostConstruct,PreDestroy,Init,Destroy,Observe,AsyncInit,ManagedEvents,MessageDispatcher,MessageHandler,MessageBinding,MessageError,MessageInterceptor,Command,CommandResult,CommandError,CommandStatus,Publish,Subscribe,PublishSubscribe,ResourceBinding,RemovedEvent,Selector,Target,Internal,ObjectDefinition,DynamicObject" />
			<arg line="-o ${release.target.dir}/release/parsley-flex4-${version}.swc" />
			<arg line="-namespace http://www.spicefactory.org/parsley ${project.dir}/manifest/parsley-core-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/flex ${project.dir}/manifest/parsley-flex-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/pimento ${project.dir}/manifest/parsley-pimento-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/cinnamon ${project.dir}/manifest/parsley-cinnamon-manifest.xml" />
			<arg line="-el ${flex4.sdk}/frameworks/libs/player/10.0/playerglobal.swc" />
			<arg line="-el ${flex4.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex4.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${release.target.dir}/release/spicelib-flex-${version}.swc" />
			<arg line="-el ${project.dir}/lib/cinnamon-${pimento.version}.swc" />
			<arg line="-el ${project.dir}/lib/pimento-${pimento.version}.swc" />
			<arg line="-sp ${project.dir}/parsley-core ${project.dir}/parsley-config ${project.dir}/parsley-flex ${project.dir}/parsley-extensions ${project.dir}/parsley-integration ${project.dir}/parsley-xml"/>
			<arg line="-include-namespaces=http://www.spicefactory.org/parsley,http://www.spicefactory.org/parsley/flex,http://www.spicefactory.org/parsley/pimento,http://www.spicefactory.org/parsley/cinnamon" />
			<arg line="-is ${project.dir}/parsley-core" />
			<arg line="-is ${project.dir}/parsley-xml" />
			<arg line="-include-classes ConfigurationClasses FlexSupportClasses IntegrationClasses" />
			<arg line="-debug=true"/>
			<arg line="-verbose-stacktraces"/>
		</exec>
		<replace file="${project.dir}/parsley-flex/org/spicefactory/parsley/flex/modules/FlexModuleSupport.as" 
					token="extends Flex4ModuleInfoBase" value="extends Flex3ModuleInfoBase"/>
	</target>
	
	<target name="compile_spicelib_flex">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=DefaultProperty,Metadata,Required,Event,AssignableTo,PostConstruct,Init" />
			<arg line="-keep-as3-metadata+=Ignore,Attribute,TextNode,ChildTextNode,ChoiceId,ChoiceType,XmlMapping" />
			<arg line="-o ${release.target.dir}/release/spicelib-flex-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/utilities.swc" />
			<arg line="-sp ${project.dir}/spicelib-core ${project.dir}/spicelib-expressions ${project.dir}/spicelib-reflect ${project.dir}/spicelib-task ${project.dir}/spicelib-xml" />
			<arg line="-is ${project.dir}/spicelib-core" />
			<arg line="-is ${project.dir}/spicelib-expressions" />
			<arg line="-is ${project.dir}/spicelib-reflect" />
			<arg line="-is ${project.dir}/spicelib-task" />
			<arg line="-is ${project.dir}/spicelib-xml" />
		</exec>
	</target>
	
	<target name="compile_spicelib_flash">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=DefaultProperty,Metadata,Required,Event,AssignableTo,PostConstruct,Init" />
			<arg line="-keep-as3-metadata+=Ignore,Attribute,TextNode,ChildTextNode,ChoiceId,ChoiceType,XmlMapping" />
			<arg line="-o ${release.target.dir}/release/spicelib-flash-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/utilities.swc" />
			<arg line="-sp ${project.dir}/spicelib-core ${project.dir}/spicelib-expressions ${project.dir}/spicelib-flash ${project.dir}/spicelib-reflect ${project.dir}/spicelib-task ${project.dir}/spicelib-xml" />
			<arg line="-is ${project.dir}/spicelib-core" />
			<arg line="-is ${project.dir}/spicelib-expressions" />
			<arg line="-is ${project.dir}/spicelib-flash" />
			<arg line="-is ${project.dir}/spicelib-reflect" />
			<arg line="-is ${project.dir}/spicelib-task" />
			<arg line="-is ${project.dir}/spicelib-xml" />
		</exec>
	</target>
	
	<target name="compile_spicelib_core">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/framework.swc" />
			<!--<arg line="-el ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/utilities.swc" />-->
			<arg line="-sp ${project.dir}/spicelib-core" />
			<arg line="-is ${project.dir}/spicelib-core" />
		</exec>
	</target>
	
	<target name="compile_spicelib_flash_support">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=PostConstruct,Init" />
			<arg line="-o ${release.target.dir}/release/modules/spicelib-flash-support-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-flash" />
			<arg line="-is ${project.dir}/spicelib-flash" />
		</exec>
	</target>
	
	<target name="compile_spicelib_reflect">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=DefaultProperty,Metadata,Required,Event,AssignableTo,Target" />
			<arg line="-o ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-reflect" />
			<arg line="-is ${project.dir}/spicelib-reflect" />
		</exec>
	</target>
	
	<target name="compile_spicelib_task">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/spicelib-task-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-task" />
			<arg line="-is ${project.dir}/spicelib-task" />
		</exec>
	</target>
	
	<target name="compile_spicelib_xml">
		<exec executable="${flex3.sdk}/bin/${compc}" dir="${basedir}">
			<arg line="-keep-as3-metadata+=Ignore,Attribute,TextNode,ChildTextNode,ChoiceId,ChoiceType,XmlMapping" />
			<arg line="-o ${release.target.dir}/release/modules/spicelib-xml-${version}.swc" />
			<arg line="-el ${flex3.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-xml ${project.dir}/spicelib-expressions" />
			<arg line="-is ${project.dir}/spicelib-xml" />
			<arg line="-is ${project.dir}/spicelib-expressions" />
		</exec>
	</target>
	
	<target name="compile_spicelib_all">
		<antcall target="compile_spicelib_core"/>
		<antcall target="compile_spicelib_reflect"/>
		<antcall target="compile_spicelib_xml"/>
		<antcall target="compile_spicelib_task"/>
		<antcall target="compile_spicelib_flash_support"/>
		<antcall target="compile_spicelib_flash"/>
		<antcall target="compile_spicelib_flex"/>
	</target>
	
	<target name="compile_parsley_all">
		<antcall target="compile_parsley_flash"/>
		<antcall target="compile_parsley_flex3"/>
		<antcall target="compile_parsley_flex4"/>
	</target>
	
	<target name="compile_all" description="Compile all Parsley and Spicelib SWCs">
		<antcall target="clear"/>
		<antcall target="compile_spicelib_all"/>
		<antcall target="compile_parsley_all"/>
	</target>
	
	
	<!-- api docs -->
		
	<target name="api_parsley_spicelib_flex">
		<delete dir="${project.dir}/release/api/parsley-flex"/>
		<mkdir dir="${project.dir}/release/api/parsley-flex"/>
		<exec executable="${flex3.sdk}/bin/asdoc.exe" dir="${project.dir}" spawn="no">
			<arg line="-source-path spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml parsley-core parsley-config parsley-flex parsley-xml parsley-integration"/>
			<arg line="-doc-sources spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml parsley-core parsley-config parsley-flex parsley-xml parsley-integration"/>
			<arg line="-library-path ${project.dir}/lib/cinnamon-${pimento.version}.swc"/>
			<arg line="-library-path ${project.dir}/lib/pimento-${pimento.version}.swc"/>
			<arg line="-library-path ${flex3.sdk}/frameworks/libs/framework.swc" />
			<arg line="-library-path ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Parsley - Spicelib - Flex API"/>
			<arg line="-window-title"/>
			<arg value="Parsley - Spicelib - Flex API"/>
			
			<!-- Parsley IOC Kernel -->
			<arg line="-package org.spicefactory.parsley.core.builder"/>
			<arg value="API for IOC kernel services for Context initialization"/>
			<arg line="-package org.spicefactory.parsley.core.builder.impl"/>
			<arg value="Implementation for IOC kernel services for Context initialization"/>
			
			<arg line="-package org.spicefactory.parsley.core.context"/>
			<arg value="API for IOC kernel services for the core container"/>
			<arg line="-package org.spicefactory.parsley.core.context.impl"/>
			<arg value="Implementation for IOC kernel services for the core container"/>
			<arg line="-package org.spicefactory.parsley.core.context.provider"/>
			<arg value="API for dynamic object providers"/>
			<arg line="-package org.spicefactory.parsley.core.context.provider.impl"/>
			<arg value="Implementation for dynamic object providers"/>
			
			<arg line="-package org.spicefactory.parsley.core.errors"/>
			<arg value="Core Error classes"/>
			<arg line="-package org.spicefactory.parsley.core.events"/>
			<arg value="Core Events"/>
			
			<arg line="-package org.spicefactory.parsley.core.factory"/>
			<arg value="API for the factories for all IOC kernel services"/>
			<arg line="-package org.spicefactory.parsley.core.factory.impl"/>
			<arg value="Implementation for the factories for all IOC kernel services"/>
			
			<arg line="-package org.spicefactory.parsley.core.lifecycle"/>
			<arg value="API for IOC kernel services for object lifecycle management"/>
			<arg line="-package org.spicefactory.parsley.core.lifecycle.impl"/>
			<arg value="Implementation for IOC kernel services for object lifecycle management"/>
			
			<arg line="-package org.spicefactory.parsley.core.messaging"/>
			<arg value="API for IOC kernel services for the messaging system"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.command"/>
			<arg value="API for the asynchronous command support"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.command.impl"/>
			<arg value="Implementation of the asynchronous command support"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.impl"/>
			<arg value="Implementation for IOC kernel services for the messaging system"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.receiver"/>
			<arg value="API for various types of message receivers"/>
			
			<arg line="-package org.spicefactory.parsley.core.registry"/>
			<arg value="API for IOC kernel services for the object definition registry"/>
			<arg line="-package org.spicefactory.parsley.core.registry.impl"/>
			<arg value="Implementation for IOC kernel services for the object definition registry"/>
			
			<arg line="-package org.spicefactory.parsley.core.scope"/>
			<arg value="API for IOC kernel services for scope management"/>
			<arg line="-package org.spicefactory.parsley.core.scope.impl"/>
			<arg value="Implementation for IOC kernel services for scope management"/>
			
			<arg line="-package org.spicefactory.parsley.core.view"/>
			<arg value="API for IOC kernel services for dynamic view wiring"/>
			<arg line="-package org.spicefactory.parsley.core.view.impl"/>
			<arg value="Implementation for IOC kernel services for dynamic view wiring"/>
			<arg line="-package org.spicefactory.parsley.core.view.metadata"/>
			<arg value="Metadata tags to be used for view wiring"/>
			
			<!-- Parsley Configuration -->
			<arg line="-package org.spicefactory.parsley.asconfig"/>
			<arg value="IOC Container initialization based on ActionScript configuration"/>
			<arg line="-package org.spicefactory.parsley.asconfig.metadata"/>
			<arg value="Metadata tags for use in ActionScript configuration"/>
			<arg line="-package org.spicefactory.parsley.asconfig.processor"/>
			<arg value="ConfigurationProcessor implementation for ActionScript configuration"/>
				
			<arg line="-package org.spicefactory.parsley.config"/>
			<arg value="Core interfaces for the configuration extension points"/>
			<arg line="-package org.spicefactory.parsley.config.impl"/>
			<arg value="Default implementations of the core configuration interfaces"/>

			<arg line="-package org.spicefactory.parsley.dsl"/>
			<arg value="Core interfaces for the configuration DSL"/>
			<arg line="-package org.spicefactory.parsley.dsl.context"/>
			<arg value="Builders for creating a new Context"/>
			<arg line="-package org.spicefactory.parsley.dsl.core"/>
			<arg value="Core interfaces for the main builder parts of the configuration DSL"/>
			<arg line="-package org.spicefactory.parsley.dsl.core.impl"/>
			<arg value="Default implementations of the main builder parts"/>
			<arg line="-package org.spicefactory.parsley.dsl.impl"/>
			<arg value="Default implementations of the core DSL interfaces"/>
			<arg line="-package org.spicefactory.parsley.dsl.lifecycle"/>
			<arg value="Builders for configuring the object lifecycle"/>
			<arg line="-package org.spicefactory.parsley.dsl.lifecycle.impl"/>
			<arg value="Default implementations of the lifecycle builder interfaces"/>
			<arg line="-package org.spicefactory.parsley.dsl.messaging"/>
			<arg value="Builders for configuring message receivers"/>
			<arg line="-package org.spicefactory.parsley.dsl.messaging.impl"/>
			<arg value="Default implementations of the message receiver builder interfaces"/>
			
			<arg line="-package org.spicefactory.parsley.instantiator"/>
			<arg value="Default implementations of the ObjectInstantiator interface"/>
			
			<arg line="-package org.spicefactory.parsley.metadata"/>
			<arg value="Classes for Metadata processing"/>
			
			<arg line="-package org.spicefactory.parsley.processor.core"/>
			<arg value="Core processors for basic operations like setting properties and invoking methods"/>
			<arg line="-package org.spicefactory.parsley.processor.lifecycle"/>
			<arg value="Processor for registering lifecycle observers"/>
			<arg line="-package org.spicefactory.parsley.processor.messaging"/>
			<arg value="Processor for registering message receivers"/>
			<arg line="-package org.spicefactory.parsley.processor.messaging.receiver"/>
			<arg value="Default implementations of the various message receiver interfaces"/>
			<arg line="-package org.spicefactory.parsley.processor.resources"/>
			<arg value="Processor for registering resource bindings"/>
			<arg line="-package org.spicefactory.parsley.processor.util"/>
			<arg value="Utilities shared by all processors"/>
			
			<arg line="-package org.spicefactory.parsley.runtime"/>
			<arg value="IOC Container initialization based on runtime configuration"/>
			<arg line="-package org.spicefactory.parsley.runtime.processor"/>
			<arg value="ConfigurationProcessor implementation for runtime configuration"/>
			
			<arg line="-package org.spicefactory.parsley.tag"/>
			<arg value="Base API for configuration tags"/>
			<arg line="-package org.spicefactory.parsley.tag.core"/>
			<arg value="Core Configuration tags for MXML and XML configuration"/>
			<arg line="-package org.spicefactory.parsley.tag.inject"/>
			<arg value="Configuration tags for dependency injection"/>
			<arg line="-package org.spicefactory.parsley.tag.lifecycle"/>
			<arg value="Configuration tags for object lifecycle management"/>
			<arg line="-package org.spicefactory.parsley.tag.model"/>
			<arg value="Configuration model shared by the tag implementations"/>
			<arg line="-package org.spicefactory.parsley.tag.messaging"/>
			<arg value="Configuration tags for the Messaging Framework"/>
			<arg line="-package org.spicefactory.parsley.tag.resources"/>
			<arg value="Configuration tags for localization"/>
			<arg line="-package org.spicefactory.parsley.tag.util"/>
			<arg value="Utilities for configuration tag implementations"/>
			
			<!-- Parsley Flex Support -->
			<arg line="-package org.spicefactory.parsley.flex"/>
			<arg value="IOC Container initialization based on MXML configuration"/>
			<arg line="-package org.spicefactory.parsley.flex.logging"/>
			<arg value="XML configuration tags for Flex LogTargets"/>
			<arg line="-package org.spicefactory.parsley.flex.modules"/>
			<arg value="Integration with Flex Modules"/>
			<arg line="-package org.spicefactory.parsley.flex.processor"/>
			<arg value="ConfigurationProcessor implementation for MXML configuration"/>
			<arg line="-package org.spicefactory.parsley.flex.resources"/>
			<arg value="Adapter for the Flex ResourceManager"/>
			<arg line="-package org.spicefactory.parsley.flex.tag"/>
			<arg value="Base class for synchronized MXML configuration tags"/>
			<arg line="-package org.spicefactory.parsley.flex.tag.builder"/>
			<arg value="Configuration tags for Context initialization"/>
			<arg line="-package org.spicefactory.parsley.flex.tag.view"/>
			<arg value="Configuration tag for explicit view wiring"/>
			<arg line="-package org.spicefactory.parsley.flex.util"/>
			<arg value="Flex Support Utilities"/>
			
			<!-- Parsley XML Support -->
			<arg line="-package org.spicefactory.parsley.xml"/>
			<arg value="IOC Container initialization based on XML configuration"/>
			<arg line="-package org.spicefactory.parsley.xml.events"/>
			<arg value="Events for XML configuration file loading"/>
			<arg line="-package org.spicefactory.parsley.xml.mapper"/>
			<arg value="Xml-Object Mapper for XML configuration files"/>
			<arg line="-package org.spicefactory.parsley.xml.processor"/>
			<arg value="ConfigurationProcesssor implementation based on XML configuration files"/>
			<arg line="-package org.spicefactory.parsley.xml.tag"/>
			<arg value="Core XML configuration tags"/>
			
			<!-- Parsley Integration -->
			<arg line="-package org.spicefactory.parsley.rpc.cinnamon.command"/>
			<arg value="Command Support for Cinnamon Remoting"/>
			<arg line="-package org.spicefactory.parsley.rpc.cinnamon.config"/>
			<arg value="MXML and XML configuration tags for Cinnamon Remoting"/>
			<arg line="-package org.spicefactory.parsley.rpc.flex.command"/>
			<arg value="Command Support for RPC based on AsyncToken"/>
			<arg line="-package org.spicefactory.parsley.rpc.pimento.config"/>
			<arg value="MXML and XML configuration tags for Pimento Data Services"/>
			<arg line="-package org.spicefactory.parsley.task.builder"/>
			<arg value="ContextBuilder Integration with the Spicelib Task Framework"/>
			<arg line="-package org.spicefactory.parsley.task.command"/>
			<arg value="Command Support for the Spicelib Task Framework"/>
			
			<!-- Spicelib Reflection API -->
			<arg line="-package org.spicefactory.lib.reflect"/>
			<arg value="Reflection API"/>
			<arg line="-package org.spicefactory.lib.reflect.cache"/>
			<arg value="Reflection Cache"/>
			<arg line="-package org.spicefactory.lib.reflect.converter"/>
			<arg value="Several Converter implementations"/>
			<arg line="-package org.spicefactory.lib.reflect.errors"/>
			<arg value="Reflection Errors"/>
			<arg line="-package org.spicefactory.lib.reflect.mapping"/>
			<arg value="Support for Metadata Tags Mapped to Classes"/>
			<arg line="-package org.spicefactory.lib.reflect.metadata"/>
			<arg value="Classes mapped to metadata tags"/>
			<arg line="-package org.spicefactory.lib.reflect.types"/>
			<arg value="Classes representing * and void"/>
			
			<!-- Spicelib XML-Object-Mapper -->
			<arg line="-package org.spicefactory.lib.xml"/>
			<arg value="Core interfaces and classes of the XML-to-Object Mapper"/>
			<arg line="-package org.spicefactory.lib.xml.mapper"/>
			<arg value="Default XML-to-Object Mapper Implementation"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.handler"/>
			<arg value="Handlers responsible for mapping a single property to XML"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.metadata"/>
			<arg value="Metadata Tags for XML-to-Object Mapping Configuration"/>
			<arg line="-package org.spicefactory.lib.expr"/>
			<arg value="Expression Framework API"/>
			<arg line="-package org.spicefactory.lib.expr.impl"/>
			<arg value="Expression Framework Implementation"/>
			
			<!-- Spicelib Task Framework -->
			<arg line="-package org.spicefactory.lib.task"/>
			<arg value="The Task Framework - Abstractions for asynchronous operations"/>
			<arg line="-package org.spicefactory.lib.task.enum"/>
			<arg value="Enumerations for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.events"/>
			<arg value="Events for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.util"/>
			<arg value="Utility Task Implementations"/>

			<!-- Spicelib Shared APIs -->
			<arg line="-package org.spicefactory.lib.errors"/>
			<arg value="Common Error Classes"/>
			<arg line="-package org.spicefactory.lib.events"/>
			<arg value="Common Event Classes"/>
			<arg line="-package org.spicefactory.lib.logging"/>
			<arg value="Logging Wrapper API"/>
			<arg line="-package org.spicefactory.lib.logging.flex"/>
			<arg value="Logging Wrapper Adapter for the Flex Logging API"/>
			<arg line="-package org.spicefactory.lib.util"/>
			<arg value="Miscellaneous Utitlities"/>
			
			<arg line="-output release/api/parsley-flex"/>
		</exec>
	</target>
	
	<target name="api_parsley_spicelib_flash">
		<delete dir="${project.dir}/release/api/parsley-flash"/>
		<mkdir dir="${project.dir}/release/api/parsley-flash"/>
		<exec executable="${flex3.sdk}/bin/asdoc.exe" dir="${project.dir}" spawn="no">
			<arg line="-source-path spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash parsley-core parsley-config parsley-flash parsley-flex parsley-xml parsley-integration"/>
			<arg line="-doc-sources spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash parsley-core parsley-config parsley-flash parsley-xml parsley-integration"/>
			<arg line="-library-path ${project.dir}/lib/cinnamon-${pimento.version}.swc"/>
			<arg line="-library-path ${project.dir}/lib/pimento-${pimento.version}.swc"/>
			<arg line="-library-path ${flex3.sdk}/frameworks/libs/framework.swc" />
			<arg line="-library-path ${flex3.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Parsley - Spicelib - Flash API"/>
			<arg line="-window-title"/>
			<arg value="Parsley - Spicelib - Flash API"/>
			
			<!-- Parsley IOC Kernel -->
			<arg line="-package org.spicefactory.parsley.core.builder"/>
			<arg value="API for IOC kernel services for Context initialization"/>
			<arg line="-package org.spicefactory.parsley.core.builder.impl"/>
			<arg value="Implementation for IOC kernel services for Context initialization"/>
			
			<arg line="-package org.spicefactory.parsley.core.context"/>
			<arg value="API for IOC kernel services for the core container"/>
			<arg line="-package org.spicefactory.parsley.core.context.impl"/>
			<arg value="Implementation for IOC kernel services for the core container"/>
			<arg line="-package org.spicefactory.parsley.core.context.provider"/>
			<arg value="API for dynamic object providers"/>
			<arg line="-package org.spicefactory.parsley.core.context.provider.impl"/>
			<arg value="Implementation for dynamic object providers"/>
			
			<arg line="-package org.spicefactory.parsley.core.errors"/>
			<arg value="Core Error classes"/>
			<arg line="-package org.spicefactory.parsley.core.events"/>
			<arg value="Core Events"/>
			
			<arg line="-package org.spicefactory.parsley.core.factory"/>
			<arg value="API for the factories for all IOC kernel services"/>
			<arg line="-package org.spicefactory.parsley.core.factory.impl"/>
			<arg value="Implementation for the factories for all IOC kernel services"/>
			
			<arg line="-package org.spicefactory.parsley.core.lifecycle"/>
			<arg value="API for IOC kernel services for object lifecycle management"/>
			<arg line="-package org.spicefactory.parsley.core.lifecycle.impl"/>
			<arg value="Implementation for IOC kernel services for object lifecycle management"/>
			
			<arg line="-package org.spicefactory.parsley.core.messaging"/>
			<arg value="API for IOC kernel services for the messaging system"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.command"/>
			<arg value="API for the asynchronous command support"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.command.impl"/>
			<arg value="Implementation of the asynchronous command support"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.impl"/>
			<arg value="Implementation for IOC kernel services for the messaging system"/>
			<arg line="-package org.spicefactory.parsley.core.messaging.receiver"/>
			<arg value="API for various types of message receivers"/>
			
			<arg line="-package org.spicefactory.parsley.core.registry"/>
			<arg value="API for IOC kernel services for the object definition registry"/>
			<arg line="-package org.spicefactory.parsley.core.registry.impl"/>
			<arg value="Implementation for IOC kernel services for the object definition registry"/>
			
			<arg line="-package org.spicefactory.parsley.core.scope"/>
			<arg value="API for IOC kernel services for scope management"/>
			<arg line="-package org.spicefactory.parsley.core.scope.impl"/>
			<arg value="Implementation for IOC kernel services for scope management"/>
			
			<arg line="-package org.spicefactory.parsley.core.view"/>
			<arg value="API for IOC kernel services for dynamic view wiring"/>
			<arg line="-package org.spicefactory.parsley.core.view.impl"/>
			<arg value="Implementation for IOC kernel services for dynamic view wiring"/>
			<arg line="-package org.spicefactory.parsley.core.view.metadata"/>
			<arg value="Metadata tags to be used for view wiring"/>
			
			<!-- Parsley Configuration -->
			<arg line="-package org.spicefactory.parsley.asconfig"/>
			<arg value="IOC Container initialization based on ActionScript configuration"/>
			<arg line="-package org.spicefactory.parsley.asconfig.metadata"/>
			<arg value="Metadata tags for use in ActionScript configuration"/>
			<arg line="-package org.spicefactory.parsley.asconfig.processor"/>
			<arg value="ConfigurationProcessor implementation for ActionScript configuration"/>
				
			<arg line="-package org.spicefactory.parsley.metadata"/>
			<arg value="Classes for Metadata processing"/>
			
			<arg line="-package org.spicefactory.parsley.runtime"/>
			<arg value="IOC Container initialization based on runtime configuration"/>
			<arg line="-package org.spicefactory.parsley.runtime.processor"/>
			<arg value="ConfigurationProcessor implementation for runtime configuration"/>
			
			<arg line="-package org.spicefactory.parsley.tag"/>
			<arg value="Base API for configuration tags"/>
			<arg line="-package org.spicefactory.parsley.tag.core"/>
			<arg value="Core Configuration tags for MXML and XML configuration"/>
			<arg line="-package org.spicefactory.parsley.tag.inject"/>
			<arg value="Configuration tags for dependency injection"/>
			<arg line="-package org.spicefactory.parsley.tag.lifecycle"/>
			<arg value="Configuration tags for object lifecycle management"/>
			<arg line="-package org.spicefactory.parsley.tag.messaging"/>
			<arg value="Configuration tags for the Messaging Framework"/>
			<arg line="-package org.spicefactory.parsley.tag.resources"/>
			<arg value="Configuration tags for localization"/>
			<arg line="-package org.spicefactory.parsley.tag.util"/>
			<arg value="Utilities for configuration tag implementations"/>
			
			<!-- Parsley XML Support -->
			<arg line="-package org.spicefactory.parsley.xml"/>
			<arg value="IOC Container initialization based on XML configuration"/>
			<arg line="-package org.spicefactory.parsley.xml.events"/>
			<arg value="Events for XML configuration file loading"/>
			<arg line="-package org.spicefactory.parsley.xml.mapper"/>
			<arg value="Xml-Object Mapper for XML configuration files"/>
			<arg line="-package org.spicefactory.parsley.xml.processor"/>
			<arg value="ConfigurationProcesssor implementation based on XML configuration files"/>
			<arg line="-package org.spicefactory.parsley.xml.tag"/>
			<arg value="Core XML configuration tags"/>
			
			<!-- Parsley Integration -->
			<arg line="-package org.spicefactory.parsley.rpc.cinnamon.command"/>
			<arg value="Command Support for Cinnamon Remoting"/>
			<arg line="-package org.spicefactory.parsley.rpc.cinnamon.config"/>
			<arg value="MXML and XML configuration tags for Cinnamon Remoting"/>
			<arg line="-package org.spicefactory.parsley.rpc.flex.command"/>
			<arg value="Command Support for RPC based on AsyncToken"/>
			<arg line="-package org.spicefactory.parsley.rpc.pimento.config"/>
			<arg value="MXML and XML configuration tags for Pimento Data Services"/>
			<arg line="-package org.spicefactory.parsley.task.builder"/>
			<arg value="ContextBuilder Integration with the Spicelib Task Framework"/>
			<arg line="-package org.spicefactory.parsley.task.command"/>
			<arg value="Command Support for the Spicelib Task Framework"/>

			<!-- Parsley Flash Support -->
			<arg line="-package org.spicefactory.parsley.flash.logging"/>
			<arg value="XML configuration tags for the Spicelib Flash Logging Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources"/>
			<arg value="Core interfaces and classes for the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.adapter"/>
			<arg value="Adapter for the core ResourceBinding configuration tag"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.events"/>
			<arg value="Events of the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.impl"/>
			<arg value="Default implementation of the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.spi"/>
			<arg value="Service Provider Interfaces of the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.tag"/>
			<arg value="XML configuration tags for the Flash Localization Framework"/>
			
			<!-- Spicelib Reflection API -->
			<arg line="-package org.spicefactory.lib.reflect"/>
			<arg value="Reflection API"/>
			<arg line="-package org.spicefactory.lib.reflect.cache"/>
			<arg value="Reflection Cache"/>
			<arg line="-package org.spicefactory.lib.reflect.converter"/>
			<arg value="Several Converter implementations"/>
			<arg line="-package org.spicefactory.lib.reflect.errors"/>
			<arg value="Reflection Errors"/>
			<arg line="-package org.spicefactory.lib.reflect.mapping"/>
			<arg value="Support for Metadata Tags Mapped to Classes"/>
			<arg line="-package org.spicefactory.lib.reflect.metadata"/>
			<arg value="Classes mapped to metadata tags"/>
			<arg line="-package org.spicefactory.lib.reflect.types"/>
			<arg value="Classes representing * and void"/>
			
			<!-- Spicelib XML-Object-Mapper -->
			<arg line="-package org.spicefactory.lib.xml"/>
			<arg value="Core interfaces and classes of the XML-to-Object Mapper"/>
			<arg line="-package org.spicefactory.lib.xml.mapper"/>
			<arg value="Default XML-to-Object Mapper Implementation"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.handler"/>
			<arg value="Handlers responsible for mapping a single property to XML"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.metadata"/>
			<arg value="Metadata Tags for XML-to-Object Mapping Configuration"/>
			<arg line="-package org.spicefactory.lib.expr"/>
			<arg value="Expression Framework API"/>
			<arg line="-package org.spicefactory.lib.expr.impl"/>
			<arg value="Expression Framework Implementation"/>
			
			<!-- Spicelib Task Framework -->
			<arg line="-package org.spicefactory.lib.task"/>
			<arg value="The Task Framework - Abstractions for asynchronous operations"/>
			<arg line="-package org.spicefactory.lib.task.enum"/>
			<arg value="Enumerations for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.events"/>
			<arg value="Events for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.util"/>
			<arg value="Utility Task Implementations"/>

			<!-- Spicelib Logging for Flash -->
			<arg line="-package org.spicefactory.lib.flash.logging"/>
			<arg value="Logging Framework API for Flash"/>
			<arg line="-package org.spicefactory.lib.flash.logging.impl"/>
			<arg value="Logging Framework Implementation for Flash"/>

			<!-- Spicelib Shared APIs -->
			<arg line="-package org.spicefactory.lib.errors"/>
			<arg value="Common Error Classes"/>
			<arg line="-package org.spicefactory.lib.events"/>
			<arg value="Common Event Classes"/>
			<arg line="-package org.spicefactory.lib.logging"/>
			<arg value="Logging Wrapper API"/>
			<arg line="-package org.spicefactory.lib.logging.flex"/>
			<arg value="Logging Wrapper Adapter for the Flex Logging API"/>
			<arg line="-package org.spicefactory.lib.util"/>
			<arg value="Miscellaneous Utitlities"/>			
	
			<arg line="-output release/api/parsley-flash"/>
		</exec>
	</target>
	
	<target name="api_spicelib">
		<delete dir="${project.dir}/release/api/spicelib"/>
		<mkdir dir="${project.dir}/release/api/spicelib"/>
		<exec executable="${flex3.sdk}/bin/asdoc.exe" dir="${project.dir}" spawn="no">
			<arg line="-source-path spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash"/>
			<arg line="-doc-sources spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash"/>
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Spicelib API"/>
			<arg line="-window-title"/>
			<arg value="Spicelib API"/>
			
			<!-- Spicelib Reflection API -->
			<arg line="-package org.spicefactory.lib.reflect"/>
			<arg value="Reflection API"/>
			<arg line="-package org.spicefactory.lib.reflect.cache"/>
			<arg value="Reflection Cache"/>
			<arg line="-package org.spicefactory.lib.reflect.converter"/>
			<arg value="Several Converter implementations"/>
			<arg line="-package org.spicefactory.lib.reflect.errors"/>
			<arg value="Reflection Errors"/>
			<arg line="-package org.spicefactory.lib.reflect.mapping"/>
			<arg value="Support for Metadata Tags Mapped to Classes"/>
			<arg line="-package org.spicefactory.lib.reflect.metadata"/>
			<arg value="Classes mapped to metadata tags"/>
			<arg line="-package org.spicefactory.lib.reflect.types"/>
			<arg value="Classes representing * and void"/>
			
			<!-- Spicelib XML-Object-Mapper -->
			<arg line="-package org.spicefactory.lib.xml"/>
			<arg value="Core interfaces and classes of the XML-to-Object Mapper"/>
			<arg line="-package org.spicefactory.lib.xml.mapper"/>
			<arg value="Default XML-to-Object Mapper Implementation"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.handler"/>
			<arg value="Handlers responsible for mapping a single property to XML"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.metadata"/>
			<arg value="Metadata Tags for XML-to-Object Mapping Configuration"/>
			<arg line="-package org.spicefactory.lib.expr"/>
			<arg value="Expression Framework API"/>
			<arg line="-package org.spicefactory.lib.expr.impl"/>
			<arg value="Expression Framework Implementation"/>
			
			<!-- Spicelib Task Framework -->
			<arg line="-package org.spicefactory.lib.task"/>
			<arg value="The Task Framework - Abstractions for asynchronous operations"/>
			<arg line="-package org.spicefactory.lib.task.enum"/>
			<arg value="Enumerations for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.events"/>
			<arg value="Events for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.util"/>
			<arg value="Utility Task Implementations"/>

			<!-- Spicelib Shared APIs -->
			<arg line="-package org.spicefactory.lib.errors"/>
			<arg value="Common Error Classes"/>
			<arg line="-package org.spicefactory.lib.events"/>
			<arg value="Common Event Classes"/>
			<arg line="-package org.spicefactory.lib.logging"/>
			<arg value="Logging Wrapper API"/>
			<arg line="-package org.spicefactory.lib.logging.flex"/>
			<arg value="Logging Wrapper Adapter for the Flex Logging API"/>
			<arg line="-package org.spicefactory.lib.util"/>
			<arg value="Miscellaneous Utitlities"/>
			
			<arg line="-output release/api/spicelib"/>
		</exec>
	</target>
	
	<target name="api_all" description="Create Public and Full Client API">
		<antcall target="api_parsley_spicelib_flex"/>
		<antcall target="api_parsley_spicelib_flash"/>
		<antcall target="api_spicelib"/>
	</target>

	<!-- create release zip -->
		
	<target name="release_zip" description="Create Release Zip">
		
		<!-- create directories -->
		<delete dir="${release.target.dir}"/>
		<mkdir dir="${release.target.dir}"/>

		<mkdir dir="${release.target.dir}/src"/>
		<mkdir dir="${release.target.dir}/lib"/>
		
		<!-- build all swcs -->
		<antcall target="compile_all"/>
		
		<!-- copy license -->
		<copy todir="${release.target.dir}">
			<fileset dir="${project.dir}" includes="license.txt"/>
		</copy>
		
		<!-- copy project -->
		<copy todir="${release.target.dir}/src">
			<fileset dir="${project.dir}">
				 <include name="spicelib-core/**/*"/>
				 <include name="spicelib-reflect/**/*"/>
				 <include name="spicelib-expressions/**/*"/>
				 <include name="spicelib-task/**/*"/>
				 <include name="spicelib-flash/**/*"/>
				 <include name="spicelib-xml/**/*"/>
				 <include name="parsley-core/**/*"/>
				 <include name="parsley-config/**/*"/>
				 <include name="parsley-flex/**/*"/>
				 <include name="parsley-xml/**/*"/>
				 <include name="parsley-flash/**/*"/>
				 <include name="parsley-integration/**/*"/>
				 <include name="test/**/*"/>
			</fileset>
		</copy>
		<copy todir="${release.target.dir}/lib">
			<fileset dir="${project.dir}/lib" includes="*.swc"/>
		</copy>
		
		<!-- copy sample applications -->
		<delete dir="${samples.base.dir}/ParsleyHelloWorld/libs"/>
		<mkdir dir="${samples.base.dir}/ParsleyHelloWorld/libs"/>
		<copy todir="${samples.base.dir}/ParsleyHelloWorld/libs">
			<fileset dir="${release.target.dir}/release">
				<include name="parsley-flex3*.swc/"/>
				<include name="spicelib-flex*.swc"/>
			</fileset>
		</copy>
		<delete file="${samples.base.dir}/ParsleyHelloWorld/HelloWorld.swf"/>
		
		<mkdir dir="${release.target.dir}/samples/helloworld"/>
		<copy todir="${release.target.dir}/samples/helloworld">
			<fileset dir="${samples.base.dir}/ParsleyHelloWorld">
				<exclude name="bin-debug/"/>
				<exclude name="bin-release/"/>
			</fileset>
		</copy>
		
		<!-- create zip -->
		<zip basedir="${release.target.dir}" zipfile="${release.target.dir}/../parsley-${version}.zip"/>
	</target>
	
</project>
