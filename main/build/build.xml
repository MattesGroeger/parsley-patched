<project name="Parsley Build"> 

	
	<property file="build.properties" />
	
	<property name="version" value="2.0.1-SNAPSHOT"/>
	<property name="pimento.version" value="1.0.1"/>
	<property name="project.dir" value="${basedir}/.."/>
	<property name="lib.dir" value="${project.dir}/lib"/>
	
	<property name="release.target.dir" value="${project.dir}/release/parsley-${version}"/>

	
	<!-- compile -->
	
	<target name="clear">
		<delete dir="${release.target.dir}"/>
		<mkdir dir="${release.target.dir}"/>
	</target>
	
	<target name="compile_parsley_complete_flash">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-keep-as3-metadata+=Inject,InjectConstructor,Factory,PostConstruct,PreDestroy,AsyncInit,ManagedEvents,MessageDispatcher,MessageHandler,MessageBinding,MessageInterceptor,ResourceBinding,Selector,Target,Internal,ObjectDefinition" />
			<arg line="-o ${release.target.dir}/release/parsley-complete-flash-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${release.target.dir}/release/spicelib-complete-flash-${version}.swc" />
			<arg line="-el ${project.dir}/lib/cinnamon-${pimento.version}.swc" />
			<arg line="-el ${project.dir}/lib/pimento-${pimento.version}.swc" />
			<arg line="-sp ${project.dir}/parsley-core ${project.dir}/parsley-flash ${project.dir}/parsley-pimento ${project.dir}/parsley-xml"/>
			<arg line="-is ${project.dir}/parsley-core" />
			<arg line="-is ${project.dir}/parsley-flash" />
			<arg line="-is ${project.dir}/parsley-xml" />
			<arg line="-is ${project.dir}/parsley-pimento" />
			<arg line="-debug=true"/>
			<arg line="-verbose-stacktraces"/>
		</exec>
	</target>
	
	<target name="compile_parsley_complete_flex">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-keep-as3-metadata+=Inject,InjectConstructor,Factory,PostConstruct,PreDestroy,AsyncInit,ManagedEvents,MessageDispatcher,MessageHandler,MessageBinding,MessageInterceptor,ResourceBinding,Selector,Target,Internal,ObjectDefinition" />
			<arg line="-o ${release.target.dir}/release/parsley-complete-flex-${version}.swc" />
			<arg line="-namespace http://www.spicefactory.org/parsley ${project.dir}/manifest/parsley-core-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/flex ${project.dir}/manifest/parsley-flex-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/pimento ${project.dir}/manifest/parsley-pimento-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/cinnamon ${project.dir}/manifest/parsley-cinnamon-manifest.xml" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${release.target.dir}/release/spicelib-complete-flex-${version}.swc" />
			<arg line="-el ${project.dir}/lib/cinnamon-${pimento.version}.swc" />
			<arg line="-el ${project.dir}/lib/pimento-${pimento.version}.swc" />
			<arg line="-sp ${project.dir}/parsley-core ${project.dir}/parsley-flex ${project.dir}/parsley-pimento ${project.dir}/parsley-xml"/>
			<arg line="-include-namespaces=http://www.spicefactory.org/parsley,http://www.spicefactory.org/parsley/flex,http://www.spicefactory.org/parsley/pimento,http://www.spicefactory.org/parsley/cinnamon" />
			<arg line="-is ${project.dir}/parsley-xml" />
			<arg line="-include-classes CoreFrameworkClasses org.spicefactory.parsley.flex.logging.FlexLoggingXmlSupport org.spicefactory.parsley.cinnamon.CinnamonXmlSupport org.spicefactory.parsley.pimento.PimentoXmlSupport" />
			<arg line="-debug=true"/>
			<arg line="-verbose-stacktraces"/>
		</exec>
	</target>
	
	<target name="compile_spicelib_complete_flex">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-keep-as3-metadata+=DefaultProperty,Metadata,Required,Event,AssignableTo,PostConstruct" />
			<arg line="-o ${release.target.dir}/release/spicelib-complete-flex-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/utilities.swc" />
			<arg line="-sp ${project.dir}/spicelib-core ${project.dir}/spicelib-expressions ${project.dir}/spicelib-reflect ${project.dir}/spicelib-task ${project.dir}/spicelib-xml" />
			<arg line="-is ${project.dir}/spicelib-core" />
			<arg line="-is ${project.dir}/spicelib-expressions" />
			<arg line="-is ${project.dir}/spicelib-reflect" />
			<arg line="-is ${project.dir}/spicelib-task" />
			<arg line="-is ${project.dir}/spicelib-xml" />
		</exec>
	</target>
	
	<target name="compile_spicelib_complete_flash">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-keep-as3-metadata+=DefaultProperty,Metadata,Required,Event,AssignableTo,PostConstruct" />
			<arg line="-o ${release.target.dir}/release/spicelib-complete-flash-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/utilities.swc" />
			<arg line="-sp ${project.dir}/spicelib-core ${project.dir}/spicelib-expressions ${project.dir}/spicelib-flash ${project.dir}/spicelib-reflect ${project.dir}/spicelib-task ${project.dir}/spicelib-xml" />
			<arg line="-is ${project.dir}/spicelib-core" />
			<arg line="-is ${project.dir}/spicelib-expressions" />
			<arg line="-is ${project.dir}/spicelib-flash" />
			<arg line="-is ${project.dir}/spicelib-reflect" />
			<arg line="-is ${project.dir}/spicelib-task" />
			<arg line="-is ${project.dir}/spicelib-xml" />
		</exec>
	</target>
	
	<target name="compile_spicelib_core">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<!--<arg line="-el ${flex.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/utilities.swc" />-->
			<arg line="-sp ${project.dir}/spicelib-core" />
			<arg line="-is ${project.dir}/spicelib-core" />
		</exec>
	</target>
	
	<target name="compile_spicelib_flash">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-keep-as3-metadata+=PostConstruct" />
			<arg line="-o ${release.target.dir}/release/modules/spicelib-flash-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-flash" />
			<arg line="-is ${project.dir}/spicelib-flash" />
		</exec>
	</target>
	
	<target name="compile_spicelib_reflect">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-keep-as3-metadata+=DefaultProperty,Metadata,Required,Event,AssignableTo" />
			<arg line="-o ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-reflect" />
			<arg line="-is ${project.dir}/spicelib-reflect" />
		</exec>
	</target>
	
	<target name="compile_spicelib_task">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/spicelib-task-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-task" />
			<arg line="-is ${project.dir}/spicelib-task" />
		</exec>
	</target>
	
	<target name="compile_spicelib_xml">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/spicelib-xml-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-sp ${project.dir}/spicelib-xml ${project.dir}/spicelib-expressions" />
			<arg line="-is ${project.dir}/spicelib-xml" />
			<arg line="-is ${project.dir}/spicelib-expressions" />
		</exec>
	</target>
	
	<target name="compile_parsley_core">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-keep-as3-metadata+=Inject,InjectConstructor,Factory,PostConstruct,PreDestroy,AsyncInit,ManagedEvents,MessageDispatcher,MessageHandler,MessageBinding,MessageInterceptor,ResourceBinding,Selector,Target,Internal,ObjectDefinition" />
			<arg line="-o ${release.target.dir}/release/modules/parsley-core-${version}.swc" />
			<arg line="-namespace http://www.spicefactory.org/parsley ${project.dir}/manifest/parsley-core-manifest.xml" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/utilities.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-task-${version}.swc" />
			<arg line="-sp ${project.dir}/parsley-core" />
			<arg line="-include-namespaces http://www.spicefactory.org/parsley" />
			<arg line="-include-classes CoreFrameworkClasses" />
		</exec>
	</target>
	
	<target name="compile_parsley_flex">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/parsley-flex-${version}.swc" />
			<arg line="-namespace http://www.spicefactory.org/parsley/flex ${project.dir}/manifest/parsley-flex-manifest.xml" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/flex.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/rpc.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/utilities.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-xml-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/parsley-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/parsley-xml-${version}.swc" />
			<arg line="-sp ${project.dir}/parsley-flex" />
			<arg line="-include-namespaces http://www.spicefactory.org/parsley/flex" />
			<arg line="-include-classes org.spicefactory.parsley.flex.logging.FlexLoggingXmlSupport" />
		</exec>
	</target>
			
	<target name="compile_parsley_xml">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/parsley-xml-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-xml-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/parsley-core-${version}.swc" />
			<arg line="-sp ${project.dir}/parsley-xml" />
			<arg line="-is ${project.dir}/parsley-xml" />
		</exec>
	</target>
	
	<target name="compile_parsley_flash">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/parsley-flash-${version}.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-task-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-flash-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-xml-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/parsley-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/parsley-xml-${version}.swc" />
			<arg line="-sp ${project.dir}/parsley-flash" />
			<arg line="-is ${project.dir}/parsley-flash" />
		</exec>
	</target>
	
	<target name="compile_parsley_pimento">
		<exec executable="${flex.sdk}/bin/compc.exe" dir="${basedir}">
			<arg line="-o ${release.target.dir}/release/modules/parsley-pimento-${version}.swc" />
			<arg line="-namespace http://www.spicefactory.org/parsley/pimento ${project.dir}/manifest/parsley-pimento-manifest.xml" />
			<arg line="-namespace http://www.spicefactory.org/parsley/cinnamon ${project.dir}/manifest/parsley-cinnamon-manifest.xml" />
			<arg line="-el ${flex.sdk}/frameworks/libs/player/9/playerglobal.swc" />
			<arg line="-el ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-reflect-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/spicelib-xml-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/parsley-core-${version}.swc" />
			<arg line="-el ${release.target.dir}/release/modules/parsley-xml-${version}.swc" />
			<arg line="-el ${project.dir}/lib/cinnamon-${pimento.version}.swc" />
			<arg line="-el ${project.dir}/lib/pimento-${pimento.version}.swc" />
			<arg line="-sp ${project.dir}/parsley-pimento" />
			<arg line="-include-namespaces=http://www.spicefactory.org/parsley/pimento,http://www.spicefactory.org/parsley/cinnamon" />
			<arg line="-include-classes org.spicefactory.parsley.cinnamon.CinnamonXmlSupport org.spicefactory.parsley.pimento.PimentoXmlSupport" />
		</exec>
	</target>
	
	<target name="compile_spicelib_all">
		<antcall target="compile_spicelib_complete_flash"/>
		<antcall target="compile_spicelib_complete_flex"/>
		<antcall target="compile_spicelib_core"/>
		<antcall target="compile_spicelib_reflect"/>
		<antcall target="compile_spicelib_xml"/>
		<antcall target="compile_spicelib_task"/>
		<antcall target="compile_spicelib_flash"/>
	</target>
	
	<target name="compile_parsley_all">
		<antcall target="compile_parsley_complete_flash"/>
		<antcall target="compile_parsley_complete_flex"/>
		<antcall target="compile_parsley_core"/>
		<antcall target="compile_parsley_xml"/>
		<antcall target="compile_parsley_flex"/>
		<antcall target="compile_parsley_flash"/>
		<antcall target="compile_parsley_pimento"/>
	</target>
	
	<target name="compile_all" description="Compile all Parsley and Spicelib SWCs">
		<antcall target="clear"/>
		<antcall target="compile_spicelib_all"/>
		<antcall target="compile_parsley_all"/>
	</target>
	
	
	<!-- api docs -->
		
	<target name="api_parsley_spicelib">
		<delete dir="${project.dir}/release/api/parsley-spicelib"/>
		<mkdir dir="${project.dir}/release/api/parsley-spicelib"/>
		<exec executable="${flex.sdk}/bin/asdoc.exe" dir="${project.dir}" spawn="no">
			<arg line="-source-path spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash parsley-core parsley-flex parsley-xml parsley-flash parsley-pimento"/>
			<arg line="-doc-sources spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash parsley-core parsley-flex parsley-xml parsley-flash parsley-pimento"/>
			<arg line="-library-path ${project.dir}/lib/cinnamon-${pimento.version}.swc"/>
			<arg line="-library-path ${project.dir}/lib/pimento-${pimento.version}.swc"/>
			<arg line="-library-path ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Parsley - Spicelib API"/>
			<arg line="-window-title"/>
			<arg value="Parsley - Spicelib API"/>
			
			<arg line="-package org.spicefactory.parsley.core"/>
			<arg value="Core classes of the IOC container"/>
			<arg line="-package org.spicefactory.parsley.core.builder"/>
			<arg value="ObjectDefinitionBuilder interfaces and implementations"/>
			<arg line="-package org.spicefactory.parsley.core.errors"/>
			<arg value="Core Error classes"/>
			<arg line="-package org.spicefactory.parsley.core.events"/>
			<arg value="Core Events"/>
			<arg line="-package org.spicefactory.parsley.core.impl"/>
			<arg value="Default implementations of the Context interface"/>
			<arg line="-package org.spicefactory.parsley.core.metadata"/>
			<arg value="Metadata tags for configuration"/>
			<arg line="-package org.spicefactory.parsley.core.task"/>
			<arg value="Integration with the Spicelib Task Framework"/>
			
			<arg line="-package org.spicefactory.parsley.messaging"/>
			<arg value="Core interfaces of the Messaging Framework"/>
			<arg line="-package org.spicefactory.parsley.messaging.decorator"/>
			<arg value="Configuration tags for the Messaging Framework - as Metadata, MXML or XML tags"/>
			<arg line="-package org.spicefactory.parsley.messaging.impl"/>
			<arg value="Default implementation of the Messaging Framework"/>
			
			<arg line="-package org.spicefactory.parsley.registry"/>
			<arg value="Core interfaces for the ObjectDefinitionRegistry"/>
			<arg line="-package org.spicefactory.parsley.registry.decorator"/>
			<arg value="Core configuration tags for dependency injection and object lifecycle - as Metadata, MXML or XML tags"/>
			<arg line="-package org.spicefactory.parsley.registry.impl"/>
			<arg value="Default implementations of the registry interfaces"/>
			<arg line="-package org.spicefactory.parsley.registry.model"/>
			<arg value="Configuration model of the registry"/>
			<arg line="-package org.spicefactory.parsley.registry.parts"/>
			<arg value="Interfaces representing configuration aspects of an ObjectDefinition"/>
			<arg line="-package org.spicefactory.parsley.registry.parts.impl"/>
			<arg value="Default implementations of the interfaces representing configuration aspects of an ObjectDefinition"/>
			<arg line="-package org.spicefactory.parsley.registry.tag"/>
			<arg value="Configuration tags for MXML and XML configuration"/>
			
			<arg line="-package org.spicefactory.parsley.resources"/>
			<arg value="Core localization support"/>
			<arg line="-package org.spicefactory.parsley.util"/>
			<arg value="Utility classes"/>
			
			<arg line="-package org.spicefactory.parsley.flex"/>
			<arg value="IOC Container initialization based on MXML configuration"/>
			<arg line="-package org.spicefactory.parsley.flex.logging"/>
			<arg value="XML configuration tags for Flex LogTargets"/>
			<arg line="-package org.spicefactory.parsley.flex.modules"/>
			<arg value="Integration with Flex Modules"/>
			<arg line="-package org.spicefactory.parsley.flex.resources"/>
			<arg value="Adapter for the Flex ResourceManager"/>
			<arg line="-package org.spicefactory.parsley.flex.tag"/>
			<arg value="Configuration tag for view wiring"/>
			<arg line="-package org.spicefactory.parsley.flex.view"/>
			<arg value="Flex view wiring support"/>
			
			<arg line="-package org.spicefactory.parsley.xml"/>
			<arg value="IOC Container initialization based on XML configuration"/>
			<arg line="-package org.spicefactory.parsley.xml.builder"/>
			<arg value="ObjectDefinitionBuilder implementation based on XML configuration files"/>
			<arg line="-package org.spicefactory.parsley.xml.events"/>
			<arg value="Events for XML configuration file loading"/>
			<arg line="-package org.spicefactory.parsley.xml.ext"/>
			<arg value="Support for custom XML configuration namespaces"/>
			<arg line="-package org.spicefactory.parsley.xml.mapper"/>
			<arg value="Xml-to-Object Mapper for XML configuration files"/>
			<arg line="-package org.spicefactory.parsley.xml.tag"/>
			<arg value="Core XML configuration tags"/>
			
			<arg line="-package org.spicefactory.parsley.cinnamon"/>
			<arg value="MXML and XML configuration tags for Cinnamon Remoting"/>
			<arg line="-package org.spicefactory.parsley.pimento"/>
			<arg value="MXML and XML configuration tags for Pimento Data Services"/>
			
			<arg line="-package org.spicefactory.parsley.flash.logging"/>
			<arg value="XML configuration tags for the Spicelib Flash Logging Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources"/>
			<arg value="Core interfaces and classes for the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.adapter"/>
			<arg value="Adapter for the core ResourceBinding configuration tag"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.events"/>
			<arg value="Events of the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.impl"/>
			<arg value="Default implementation of the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.spi"/>
			<arg value="Service Provider Interfaces of the Flash Localization Framework"/>
			<arg line="-package org.spicefactory.parsley.flash.resources.tag"/>
			<arg value="XML configuration tags for the Flash Localization Framework"/>
			
			<arg line="-package org.spicefactory.lib.errors"/>
			<arg value="Common Error Classes"/>
			<arg line="-package org.spicefactory.lib.events"/>
			<arg value="Common Event Classes"/>
			<arg line="-package org.spicefactory.lib.logging"/>
			<arg value="Logging Wrapper API"/>
			<arg line="-package org.spicefactory.lib.logging.flex"/>
			<arg value="Logging Wrapper Adapter for the Flex Logging API"/>
			<arg line="-package org.spicefactory.lib.util"/>
			<arg value="Miscellaneous Utitlities"/>
				
			<arg line="-package org.spicefactory.lib.expr"/>
			<arg value="Expression Framework API"/>
			<arg line="-package org.spicefactory.lib.expr.impl"/>
			<arg value="Expression Framework Implementation"/>
			
			<arg line="-package org.spicefactory.lib.flash.logging"/>
			<arg value="Logging Framework API for Flash"/>
			<arg line="-package org.spicefactory.lib.flash.logging.impl"/>
			<arg value="Logging Framework Implementation for Flash"/>
			
			<arg line="-package org.spicefactory.lib.reflect"/>
			<arg value="Reflection API"/>
			<arg line="-package org.spicefactory.lib.reflect.converter"/>
			<arg value="Several Converter implementations"/>
			<arg line="-package org.spicefactory.lib.reflect.errors"/>
			<arg value="Reflection Errors"/>
			<arg line="-package org.spicefactory.lib.reflect.mapping"/>
			<arg value="Support for Metadata Tags Mapped to Classes"/>
			<arg line="-package org.spicefactory.lib.reflect.metadata"/>
			<arg value="Classes mapped to metadata tags"/>
			<arg line="-package org.spicefactory.lib.reflect.types"/>
			<arg value="Classes representing * and void"/>
			
			<arg line="-package org.spicefactory.lib.task"/>
			<arg value="The Task Framework - Abstractions for asynchronous operations"/>
			<arg line="-package org.spicefactory.lib.task.enum"/>
			<arg value="Enumerations for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.events"/>
			<arg value="Events for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.util"/>
			<arg value="Utility Task Implementations"/>
			
			<arg line="-package org.spicefactory.lib.xml"/>
			<arg value="Core interfaces and classes of the XML-to-Object Mapper"/>
			<arg line="-package org.spicefactory.lib.xml.mapper"/>
			<arg value="Default XML-to-Object Mapper Implementation"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.handler"/>
			<arg value="Handlers responsible for mapping a single property to XML"/>
			
			<arg line="-output release/api/parsley-spicelib"/>
		</exec>
	</target>
	
	<target name="api_parsley_minimal">
		<delete dir="${project.dir}/release/api/parsley-minimal"/>
		<mkdir dir="${project.dir}/release/api/parsley-minimal"/>
		<exec executable="${flex.sdk}/bin/asdoc.exe" dir="${project.dir}">
			<arg line="-source-path spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash parsley-core parsley-flex parsley-xml parsley-flash parsley-pimento"/>
			
			<arg line="-doc-classes org.spicefactory.parsley.core.Context"/>
			<arg line="org.spicefactory.parsley.core.CompositeContextBuilder"/> 
			<arg line="org.spicefactory.parsley.core.ActionScriptContextBuilder"/> 
			<arg line="org.spicefactory.parsley.messaging.MessageRouter"/> 
			<arg line="org.spicefactory.parsley.messaging.MessageProcessor"/> 
			<arg line="org.spicefactory.parsley.messaging.MessageTarget"/> 
			<arg line="org.spicefactory.parsley.flex.FlexContextBuilder"/> 
			<arg line="org.spicefactory.parsley.flex.logging.FlexLoggingXmlSupport"/> 
			<arg line="org.spicefactory.parsley.flex.modules.ContextModule"/> 
			<arg line="org.spicefactory.parsley.flex.modules.ModuleLoader"/> 
			<arg line="org.spicefactory.parsley.flex.tag.Configure"/> 
			<arg line="org.spicefactory.parsley.xml.XmlContextBuilder"/> 
			<arg line="org.spicefactory.parsley.xml.ext.XmlConfigurationNamespace"/> 
			<arg line="org.spicefactory.parsley.xml.ext.XmlConfigurationNamespaceRegistry"/> 
			<arg line="org.spicefactory.parsley.cinnamon.CinnamonXmlSupport"/> 
			<arg line="org.spicefactory.parsley.pimento.PimentoXmlSupport"/> 
			
			<arg line="-library-path ${project.dir}/lib/cinnamon-${pimento.version}.swc"/>
			<arg line="-library-path ${project.dir}/lib/pimento-${pimento.version}.swc"/>
			<arg line="-library-path ${flex.sdk}/frameworks/libs/framework.swc" />
			<arg line="-exclude-dependencies=true"/>
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Parsley Minimal API"/>
			<arg line="-window-title"/>
			<arg value="Parsley Minimal API"/>
			
			<arg line="-package org.spicefactory.parsley.core"/>
			<arg value="Core classes of the IOC container"/>
			<arg line="-package org.spicefactory.parsley.messaging"/>
			<arg value="Core interfaces of the Messaging Framework"/>
			
			<arg line="-package org.spicefactory.parsley.flex"/>
			<arg value="IOC Container initialization based on MXML configuration"/>
			<arg line="-package org.spicefactory.parsley.flex.logging"/>
			<arg value="XML configuration tags for Flex LogTargets"/>
			<arg line="-package org.spicefactory.parsley.flex.modules"/>
			<arg value="Integration with Flex Modules"/>
			<arg line="-package org.spicefactory.parsley.flex.tag"/>
			<arg value="Configuration tag for view wiring"/>

			<arg line="-package org.spicefactory.parsley.xml"/>
			<arg value="IOC Container initialization based on XML configuration"/>
			<arg line="-package org.spicefactory.parsley.xml.ext"/>
			<arg value="Support for custom XML configuration namespaces"/>
			
			<arg line="-package org.spicefactory.parsley.cinnamon"/>
			<arg value="MXML and XML configuration tags for Cinnamon Remoting"/>
			<arg line="-package org.spicefactory.parsley.pimento"/>
			<arg value="MXML and XML configuration tags for Pimento Data Services"/>
			
			<arg line="-output release/api/parsley-minimal"/>
		</exec>
	</target>
	
	<target name="api_spicelib">
		<delete dir="${project.dir}/release/api/spicelib"/>
		<mkdir dir="${project.dir}/release/api/spicelib"/>
		<exec executable="${flex.sdk}/bin/asdoc.exe" dir="${project.dir}" spawn="no">
			<arg line="-source-path spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash"/>
			<arg line="-doc-sources spicelib-core spicelib-expressions spicelib-reflect spicelib-task spicelib-xml spicelib-flash"/>
			<arg line="-left-frameset-width 250"/>
			<arg line="-main-title"/>
			<arg value="Spicelib API"/>
			<arg line="-window-title"/>
			<arg value="Spicelib API"/>
			
			<arg line="-package org.spicefactory.lib.errors"/>
			<arg value="Common Error Classes"/>
			<arg line="-package org.spicefactory.lib.events"/>
			<arg value="Common Event Classes"/>
			<arg line="-package org.spicefactory.lib.logging"/>
			<arg value="Logging Wrapper API"/>
			<arg line="-package org.spicefactory.lib.logging.flex"/>
			<arg value="Logging Wrapper Adapter for the Flex Logging API"/>
			<arg line="-package org.spicefactory.lib.util"/>
			<arg value="Miscellaneous Utitlities"/>
				
			<arg line="-package org.spicefactory.lib.expr"/>
			<arg value="Expression Framework API"/>
			<arg line="-package org.spicefactory.lib.expr.impl"/>
			<arg value="Expression Framework Implementation"/>
			
			<arg line="-package org.spicefactory.lib.flash.logging"/>
			<arg value="Logging Framework API for Flash"/>
			<arg line="-package org.spicefactory.lib.flash.logging.impl"/>
			<arg value="Logging Framework Implementation for Flash"/>
			
			<arg line="-package org.spicefactory.lib.reflect"/>
			<arg value="Reflection API"/>
			<arg line="-package org.spicefactory.lib.reflect.converter"/>
			<arg value="Several Converter implementations"/>
			<arg line="-package org.spicefactory.lib.reflect.errors"/>
			<arg value="Reflection Errors"/>
			<arg line="-package org.spicefactory.lib.reflect.mapping"/>
			<arg value="Support for Metadata Tags Mapped to Classes"/>
			<arg line="-package org.spicefactory.lib.reflect.metadata"/>
			<arg value="Classes mapped to metadata tags"/>
			<arg line="-package org.spicefactory.lib.reflect.types"/>
			<arg value="Classes representing * and void"/>
			
			<arg line="-package org.spicefactory.lib.task"/>
			<arg value="The Task Framework - Abstractions for asynchronous operations"/>
			<arg line="-package org.spicefactory.lib.task.enum"/>
			<arg value="Enumerations for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.events"/>
			<arg value="Events for the Task Framework"/>
			<arg line="-package org.spicefactory.lib.task.util"/>
			<arg value="Utility Task Implementations"/>
			
			<arg line="-package org.spicefactory.lib.xml"/>
			<arg value="Core interfaces and classes of the XML-to-Object Mapper"/>
			<arg line="-package org.spicefactory.lib.xml.mapper"/>
			<arg value="Default XML-to-Object Mapper Implementation"/>
			<arg line="-package org.spicefactory.lib.xml.mapper.handler"/>
			<arg value="Handlers responsible for mapping a single property to XML"/>
			
			<arg line="-output release/api/spicelib"/>
		</exec>
	</target>
	
	<target name="api_all" description="Create Public and Full Client API">
		<antcall target="api_parsley_minimal"/>
		<antcall target="api_parsley_spicelib"/>
		<antcall target="api_spicelib"/>
	</target>

	<!-- create release zip -->
		
	<target name="release_zip" description="Create Release Zip">
		
		<!-- create directories -->
		<delete dir="${release.target.dir}"/>
		<mkdir dir="${release.target.dir}"/>

		<mkdir dir="${release.target.dir}/src"/>
		<mkdir dir="${release.target.dir}/lib"/>
		
		<!-- build all swcs -->
		<antcall target="compile_all"/>
		
		<!-- copy license -->
		<copy todir="${release.target.dir}">
			<fileset dir="${project.dir}" includes="license.txt"/>
		</copy>
		
		<!-- copy project -->
		<copy todir="${release.target.dir}/src">
			<fileset dir="${project.dir}">
				 <include name="spicelib-core/**/*"/>
				 <include name="spicelib-reflect/**/*"/>
				 <include name="spicelib-expressions/**/*"/>
				 <include name="spicelib-task/**/*"/>
				 <include name="spicelib-flash/**/*"/>
				 <include name="spicelib-xml/**/*"/>
				 <include name="parsley-core/**/*"/>
				 <include name="parsley-flex/**/*"/>
				 <include name="parsley-xml/**/*"/>
				 <include name="parsley-flash/**/*"/>
				 <include name="parsley-pimento/**/*"/>
				 <include name="test/**/*"/>
			</fileset>
		</copy>
		<copy todir="${release.target.dir}/lib">
			<fileset dir="${project.dir}/lib" includes="*.swc"/>
		</copy>
		
		<!-- create zip -->
		<zip basedir="${release.target.dir}" zipfile="${release.target.dir}/../parsley-${version}.zip"/>
	</target>
	
</project>
